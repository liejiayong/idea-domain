(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{628:function(s,t,n){"use strict";n.r(t);var a=n(9),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"install"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#install"}},[s._v("#")]),s._v(" Install")]),s._v(" "),n("h2",{attrs:{id:"window-terminal"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#window-terminal"}},[s._v("#")]),s._v(" Window Terminal")]),s._v(" "),n("p",[s._v("在安装 Docker 前先确认下 Windows 需符合一下条件：")]),s._v(" "),n("ul",[n("li",[s._v("支持 "),n("code",[s._v("Hyper-V")]),s._v(" 的 Windows 版本，"),n("code",[s._v("Hyper-V")]),s._v(" 目前仅在 Windows 10 之后的版本支持")]),s._v(" "),n("li",[n("code",[s._v("BIOS")]),s._v(" 里需要启用 "),n("code",[s._v("Virtualization")]),s._v("（虚拟化）")])]),s._v(" "),n("p",[s._v("在 "),n("a",{attrs:{href:"https://www.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker 官网"),n("OutboundLink")],1),s._v(" 安装 "),n("a",{attrs:{href:"https://desktop.docker.com/win/main/amd64/Docker%20Desktop%20Installer.exe?utm_source=docker&utm_medium=webreferral&utm_campaign=dd-smartbutton&utm_location=module",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker for Windows"),n("OutboundLink")],1)]),s._v(" "),n("h1",{attrs:{id:"镜像源"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#镜像源"}},[s._v("#")]),s._v(" 镜像源")]),s._v(" "),n("h2",{attrs:{id:"国内镜像源"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#国内镜像源"}},[s._v("#")]),s._v(" 国内镜像源")]),s._v(" "),n("ul",[n("li",[s._v("默认镜像：https://hub.docker.com/")])]),s._v(" "),n("p",[s._v("由于国内网络问题，使用默认镜像存在加载缓慢的问题。为了更丝滑的使用 docker，因此需要在下载好 docker 后将其镜像源设置为国内镜像源。")]),s._v(" "),n("p",[s._v("常用国内镜像源有：")]),s._v(" "),n("ul",[n("li",[s._v("Docker 中国区官方镜像 https://registry.docker-cn.com")]),s._v(" "),n("li",[s._v("中国科技大学 https://docker.mirrors.ustc.edu.cn")]),s._v(" "),n("li",[s._v("网易 http://hub-mirror.c.163.com")]),s._v(" "),n("li",[s._v("ustc https://docker.mirrors.ustc.edu.cn")])]),s._v(" "),n("h2",{attrs:{id:"设置-window-子系统-镜像源"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#设置-window-子系统-镜像源"}},[s._v("#")]),s._v(" 设置 "),n("code",[s._v("Window 子系统")]),s._v(" 镜像源")]),s._v(" "),n("p",[s._v("添加 https://registry.docker-cn.com 到 registry-mirrors 数组")]),s._v(" "),n("ul",[n("li",[s._v("vim 编辑文件")])]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim /etc/docker/daemon.json")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"registry-mirrors"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://registry.docker-cn.com"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl restart docker.service")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h2",{attrs:{id:"设置-window-docker-软件-镜像源"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#设置-window-docker-软件-镜像源"}},[s._v("#")]),s._v(" 设置 "),n("code",[s._v("Window docker 软件")]),s._v(" 镜像源")]),s._v(" "),n("p",[s._v("使用 vim 进入镜像源配置路径：/etc/apt/sources.list")]),s._v(" "),n("p",[s._v("本案例使用 163 的镜像源:")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("deb http://mirrors.163.com/ubuntu/ bionic main restricted universe multiverse\ndeb http://mirrors.163.com/ubuntu/ bionic-security main restricted universe multiverse\ndeb http://mirrors.163.com/ubuntu/ bionic-updates main restricted universe multiverse\ndeb http://mirrors.163.com/ubuntu/ bionic-proposed main restricted universe multiverse\ndeb http://mirrors.163.com/ubuntu/ bionic-backports main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ bionic main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ bionic-security main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ bionic-updates main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ bionic-proposed main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ bionic-backports main restricted universe multiverse\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("接使用 vim 打开 sources.list ,使用编辑模式 E 进去 dd 又 p，然后:wq 保存退出。")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑镜像源配置文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/apt/sources.list\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新完镜像源后需更新软件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" update\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h1",{attrs:{id:"docker-常用命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker-常用命令"}},[s._v("#")]),s._v(" Docker 常用命令")]),s._v(" "),n("p",[s._v("当前 Docker 运行基于版本 v20.x")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看docker版本，Bash输出：Docker version 20.10.17, build 100c701")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" --version\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看docker本地镜像,Bash输出如下：")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# REPOSITORY   TAG       IMAGE ID       CREATED      SIZE")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ubuntu       18.04     71eaf13299f4   8 days ago   63.1MB")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载docker镜像")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如：docker pull ubuntu:18.04")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("image_name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(":"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("image_version"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行docker镜像，如运行ubuntu的bash窗口")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -it ubuntu:18.04 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("h1",{attrs:{id:"模拟创建-打包-提交新镜像"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#模拟创建-打包-提交新镜像"}},[s._v("#")]),s._v(" 模拟创建-打包-提交新镜像")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 接着下载常用软件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" iputils-ping "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" net-tools "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装python")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" python3.6\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /usr/bin/python3.6 /usr/bin/python\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" python3-pip\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# # 假若至此是某项目需要的配置，先查看刚配置的容器信息，Bash输出如下：")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# CONTAINER ID   IMAGE          COMMAND   CREATED       STATUS       PORTS     NAMES")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# bac6226f51a3   ubuntu:18.04   "bash"    4 hours ago   Up 4 hours             xenodochial_lalande')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -a\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 接着打包镜像，Bash输出打包镜像的sha256如下:")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sha256:06811dd1053f30caefab5f64515bd0b3ff48334f4d6c0697818e4e594c2e6bcb")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" commit bac6226f51a3 liejy/test:1.0\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 然后查看镜像，Bash输出如下：")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# REPOSITORY   TAG       IMAGE ID       CREATED         SIZE")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# liejy/test   1.0       06811dd1053f   6 seconds ago   569MB")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ubuntu       18.04     71eaf13299f4   8 days ago      63.1MB")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 接着本地测试新镜像")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -it 06811dd1053f "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打包好镜像后本地就可以查看到liejy/test了，当然为了共享方便，即可将新镜像推送到docker hub")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull liejy/test:1.0\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br")])]),n("h1",{attrs:{id:"基础知识"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基础知识"}},[s._v("#")]),s._v(" 基础知识")]),s._v(" "),n("h2",{attrs:{id:"docker-run"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker-run"}},[s._v("#")]),s._v(" "),n("code",[s._v("docker run")])]),s._v(" "),n("h3",{attrs:{id:"参数说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参数说明"}},[s._v("#")]),s._v(" 参数说明")]),s._v(" "),n("ul",[n("li",[s._v('-a stdin：指定标准输入/输出内容的类型，可以选择的类型包括"STDIN","STDOUT","STDERR";')]),s._v(" "),n("li",[s._v("-d：在后台运行容器，并返回容器 ID;")]),s._v(" "),n("li",[s._v("-i：以交互模式运行容器，通常与参数-t 同时使用;")]),s._v(" "),n("li",[s._v("-P：随机端口映射，容器内部端口随机映射到主机端口;")]),s._v(" "),n("li",[s._v("-p：指定端口映射，格式为主机（宿主机）端口：容器端口;")]),s._v(" "),n("li",[s._v("-t：为容器重新分配一个伪输入终端，通常与参数-i 同时使用;")]),s._v(" "),n("li",[s._v("-name：为容器指定一个名称;")]),s._v(" "),n("li",[s._v("-dns8.8.8.8：指定容器使用的 DNS 服务器，默认和宿主机一致；")]),s._v(" "),n("li",[s._v("-dns-search example.com：用于指定容器内 DNS 搜索域名，默认和宿主机一致;")]),s._v(" "),n("li",[s._v("h：指定容器的 hostname;")]),s._v(" "),n("li",[s._v('-e：设置环境变量，如-e username""xxx;')]),s._v(" "),n("li",[s._v("-env-file=[]：从指定文件中读取环境变量;")]),s._v(" "),n("li",[s._v('-cpuset：绑定容器到指定 CPU 运行，如--cpuset="0-2"或--cpuset="0,1,2";')]),s._v(" "),n("li",[s._v("-m：设置容器使用的内存空间最大值;")]),s._v(" "),n("li",[s._v('-net="bridge"：指定容器的网络连接类型，支持"bridge","host","none","container:<name|id>"四种类型;')]),s._v(" "),n("li",[s._v("-link=[]：向另一个容器添加链接;")]),s._v(" "),n("li",[s._v("-expose=[]：开放一个端口或一组端口;")]),s._v(" "),n("li",[s._v("volume, -v：绑定一个卷;")])]),s._v(" "),n("h1",{attrs:{id:"进阶"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#进阶"}},[s._v("#")]),s._v(" 进阶")])])}),[],!1,null,null,null);t.default=e.exports}}]);