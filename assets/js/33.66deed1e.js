(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{644:function(t,s,a){"use strict";a.r(s);var n=a(9),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("blockquote",[a("p",[t._v("引入第三方字体一定要注意字体"),a("strong",[t._v("版权")]),t._v("问题")])]),t._v(" "),a("h1",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),a("p",[t._v("承接上文"),a("a",{attrs:{href:"https://mp.weixin.qq.com/s/a2-PlleQUOZzEu7Y0iaRhg",target:"_blank",rel:"noopener noreferrer"}},[t._v("web 端字体兼容性适配"),a("OutboundLink")],1),t._v("之后，好久没有总结 CSS3 引入字体 "),a("code",[t._v("@font-face")]),t._v(" 相关的文章了。一是在掌握 "),a("code",[t._v("@font-face")]),t._v(" 的基本使用要领后没遇过兼容性问题，二是觉得 "),a("code",[t._v("@font-face")]),t._v(" 已经兼容 ie9+及现代浏览器了，兼容性问题基本可以忽略不计了。事与愿违的是，在多次实战中发现引入第三方字体会出现许多奇形怪状的问题，譬如字体文件的编码问题引发字体可以在桌面系统正常使用而在 Web 端不起作用、字体文件中英文或其他外语的字体行高差异问题、字体文件的等宽比在不同浏览器显示差异问题......现对"),a("a",{attrs:{href:"https://mp.weixin.qq.com/s/a2-PlleQUOZzEu7Y0iaRhg",target:"_blank",rel:"noopener noreferrer"}},[t._v("web 端字体兼容性适配"),a("OutboundLink")],1),t._v("作补充，如果不妥请各位大佬抬手指正(#^.^#)。")]),t._v(" "),a("h1",{attrs:{id:"css-引入外部字体"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#css-引入外部字体"}},[t._v("#")]),t._v(" css 引入外部字体")]),t._v(" "),a("p",[t._v("css 通过"),a("code",[t._v("@font-face")]),t._v(" 的方式引入外部字体。")]),t._v(" "),a("p",[t._v("且不同浏览器对引入字体的格式有差别")]),t._v(" "),a("p",[t._v("浏览器的兼容性,如下所示：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Browser")]),t._v(" "),a("th",[t._v("@font-face")]),t._v(" "),a("th",[t._v("TrueType")]),t._v(" "),a("th",[t._v("WOFF")]),t._v(" "),a("th",[t._v("EOT")]),t._v(" "),a("th",[t._v("SVG")]),t._v(" "),a("th",[t._v("SVGZ")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("IE")]),t._v(" "),a("td",[t._v("4+")]),t._v(" "),a("td",[t._v("9+")]),t._v(" "),a("td",[t._v("9+")]),t._v(" "),a("td",[t._v("4+")]),t._v(" "),a("td"),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("Firefox")]),t._v(" "),a("td",[t._v("3.5+")]),t._v(" "),a("td",[t._v("3.5+")]),t._v(" "),a("td",[t._v("3.6+")]),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("Chrome")]),t._v(" "),a("td",[t._v("4+")]),t._v(" "),a("td",[t._v("4+")]),t._v(" "),a("td",[t._v("6+")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("4+")]),t._v(" "),a("td",[t._v("6+")])]),t._v(" "),a("tr",[a("td",[t._v("Safria")]),t._v(" "),a("td",[t._v("3.1+")]),t._v(" "),a("td",[t._v("3.1+")]),t._v(" "),a("td",[t._v("6+")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("3.1+")]),t._v(" "),a("td",[t._v("3.1+")])]),t._v(" "),a("tr",[a("td",[t._v("Opera")]),t._v(" "),a("td",[t._v("10+")]),t._v(" "),a("td",[t._v("10+")]),t._v(" "),a("td",[t._v("11.1+")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("10+")]),t._v(" "),a("td",[t._v("10+")])])])]),t._v(" "),a("p",[t._v("由上归纳可得：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v(".TTF")]),t._v("或"),a("code",[t._v(".OTF")]),t._v("，适用于"),a("code",[t._v("IE 9+、Firefox 3.5+、Safari 3.1+、Opera 10+")])]),t._v(" "),a("li",[a("code",[t._v(".EOT")]),t._v("，适用于"),a("code",[t._v("Internet Explorer 4.0+")])]),t._v(" "),a("li",[a("code",[t._v(".SVG")]),t._v("，适用于 "),a("code",[t._v("Chrome、IPhone")])])]),t._v(" "),a("p",[t._v("最终得出结论："),a("code",[t._v(".eot + .ttf /.otf + svg + woff")]),t._v(" = 所有浏览器的完美支持")]),t._v(" "),a("h2",{attrs:{id:"font-face的语法规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#font-face的语法规则"}},[t._v("#")]),t._v(" "),a("code",[t._v("@font-face")]),t._v("的语法规则")]),t._v(" "),a("p",[a("code",[t._v("@font-face")]),t._v("的语法规则如下：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("@font-face {\n  [font-family: <family-name>;]?\n  [src: [ <uri> [format(<string>#)]? | <font-face-name> ]#;]?\n  [unicode-range: <urange>#;]?\n  [font-variant: <font-variant>;]?\n  [font-feature-settings: normal|<feature-tag-value>#;]?\n  [font-stretch: <font-stretch>;]?\n  [font-weight: <weight>];\n  [font-style: <style>];\n}\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("p",[t._v("对此，我们需要事先准备需要引入字体源件，然后通过 css 定义"),a("code",[t._v("@font-face")]),t._v("进行引入。")]),t._v(" "),a("div",{staticClass:"language-css line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token atrule"}},[a("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@font-face")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-family")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'YourWebFontName'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("src")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string url"}},[t._v("'YourWebFontName.eot'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* IE9 Compat Modes */")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("src")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string url"}},[t._v("'YourWebFontName.eot?#iefix'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'embedded-opentype'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* IE6-IE8 */")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string url"}},[t._v("'YourWebFontName.woff'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'woff'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Modern Browsers */")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string url"}},[t._v("'YourWebFontName.ttf'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'truetype'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Safari, Android, iOS */")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token url"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string url"}},[t._v("'YourWebFontName.svg#YourWebFontName'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'svg'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Legacy iOS */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".ff-fcustom")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-family")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'YourWebFontName'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])]),a("h1",{attrs:{id:"字体兼容性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字体兼容性"}},[t._v("#")]),t._v(" 字体兼容性")]),t._v(" "),a("h2",{attrs:{id:"字体编码兼容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字体编码兼容"}},[t._v("#")]),t._v(" 字体编码兼容")]),t._v(" "),a("p",[t._v("前段时间有几个需要引入第三方字体的项目，引入过西文、韩文、泰文、以及种类繁多让你眼花缭乱的中文字体，可能是因为引入那种中文字体比较多的缘故吧，老觉得中文字体的兼容性可能会多些，其中编码兼容性像一座大山。")]),t._v(" "),a("p",[t._v("或许你会遇到过这样的情景，字体在 Photoshop 可以正常使用，放在 Web 端通过 "),a("code",[t._v("@font-face")]),t._v(" 引入后字体显示不起作用。与相似的还有引入字体在 IE、Firefox 等浏览器正常使用，在 chrome 浏览器却显示编码报错不起作用如："),a("code",[t._v("OTS parsing error: cmap: Failed to serialize table")]),t._v("的情况，或者完全因为字体编码格式不是被该浏览器所支持。")]),t._v(" "),a("p",[t._v("“工欲善其事必先利其器”，解决编码问题最直接的办法当然是将字体转码处理了。这里推荐两个字体转码工具：")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.fontsquirrel.com/tools/webfont-generator",target:"_blank",rel:"noopener noreferrer"}},[t._v("Webfont Generator"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://cloudconvert.com/eot-to-ttf",target:"_blank",rel:"noopener noreferrer"}},[t._v("cloudconvert Generator"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("只需将字体转化为需要的字体格式即可，另外推荐使用"),a("code",[t._v(".ttf")]),t._v("格式，用途下面有细讲。")]),t._v(" "),a("h1",{attrs:{id:"字体优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字体优化"}},[t._v("#")]),t._v(" 字体优化")]),t._v(" "),a("h2",{attrs:{id:"字体压缩"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字体压缩"}},[t._v("#")]),t._v(" 字体压缩")]),t._v(" "),a("p",[t._v("字体文件体积一般少则 2~4M，多则能达到 20~30M 之多，因此 "),a("strong",[t._v("直接")]),t._v(" 引入第三方字体尚且存在很大缺陷，尤其是在移动端使用。")]),t._v(" "),a("p",[t._v("当然开发者的智慧是无穷的，社区对此类问题也提供了字体压缩的解决方案。")]),t._v(" "),a("p",[t._v("常用字体压缩有：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("font-spider")])]),t._v(" "),a("li",[a("code",[t._v("fontmin")])])]),t._v(" "),a("p",[t._v("上述字体压缩工具的核心是，通过抽离指定预设的字符串来生成新的字体文件，因为排除了大量不需要的字符串集，抽离后的字体文件体积大大变小，从而达到字体压缩的效果。")]),t._v(" "),a("h3",{attrs:{id:"font-spider"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#font-spider"}},[t._v("#")]),t._v(" "),a("code",[t._v("font-spider")])]),t._v(" "),a("p",[t._v("使用"),a("code",[t._v("font-spider")]),t._v("已经有几年时间了，用着方便也是比较推荐使用的。")]),t._v(" "),a("p",[t._v("详细的使用方法可以查看"),a("a",{attrs:{href:"https://github.com/aui/font-spider",target:"_blank",rel:"noopener noreferrer"}},[t._v("font-spider 官网"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[a("code",[t._v("font-spider")]),t._v("的主要用途是 将 "),a("strong",[a("code",[t._v(".ttf")])]),t._v(" 格式的字体文件根据需求预设 css 字体格式来生成字体文件。")]),t._v(" "),a("p",[t._v("特别注意的是，"),a("code",[t._v("font-spider")]),t._v(" 只能将 "),a("strong",[a("code",[t._v(".ttf")])]),t._v(" 格式的字体文件转化为其他格式的字体文件。")]),t._v(" "),a("h3",{attrs:{id:"fontmin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fontmin"}},[t._v("#")]),t._v(" "),a("code",[t._v("fontmin")])]),t._v(" "),a("p",[t._v("最近身边有同学也在使用 "),a("code",[t._v("fontmin")]),t._v(" 来转化字体格式，因此也贴出来供大家参考食用。")]),t._v(" "),a("p",[t._v("详细的使用方法可以查看"),a("a",{attrs:{href:"https://github.com/ecomfe/fontmin",target:"_blank",rel:"noopener noreferrer"}},[t._v("fontmin 官网"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[a("code",[t._v("fontmin")]),t._v(" 跟 "),a("code",[t._v("font-spider")]),t._v(" 的最大差异是，前者不需要指定**"),a("code",[t._v(".ttf")]),t._v("** 格式的字体文件进行转化，而是通过其配套的字体转化插件来定制使用。")]),t._v(" "),a("h2",{attrs:{id:"使用-rel-preload-优化字体加载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-rel-preload-优化字体加载"}},[t._v("#")]),t._v(" 使用 "),a("code",[t._v('rel="preload"')]),t._v(" 优化字体加载")]),t._v(" "),a("p",[t._v("由于自定义字体只有当前页面被引用到的时候，浏览器才会对字体进行加载。为了更快的加载字体文件，可以使用"),a("code",[t._v('rel="preload"')]),t._v("来达到效果")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("preload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("font.woff2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("as")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("font"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("font/woff2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("crossorigin")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h2",{attrs:{id:"fout-flash-of-unstyled-text-优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fout-flash-of-unstyled-text-优化"}},[t._v("#")]),t._v(" FOUT(Flash of Unstyled Text) 优化")]),t._v(" "),a("p",[t._v("FOIT(Flash of Invisible Text)问题：浏览器在加载字体的时候的默认表现形式，也就是在字体加载过程中，页面是看不到文本内容的。在现代浏览器中，FOIT 会导致这种现象出现至多 3 秒。FOIT 会导致很差的用户体验，这是我们需要尽量去避免的。")]),t._v(" "),a("p",[t._v("FOUT：在字体加载过程中使用默认的系统字体，字体加载完后显示加载的字体，如果超过了 FOIT(3s)字体还没加载，则继续使用默认的系统字体。")]),t._v(" "),a("p",[t._v("FOUT 特性：")]),t._v(" "),a("ul",[a("li",[t._v("通过 "),a("code",[t._v("@font-face")]),t._v(" 设置 属性 "),a("code",[t._v("font-display")]),t._v(" 来实现，默认为 auto。")]),t._v(" "),a("li",[t._v("IE 浏览器和 Edge 不会等待 FOIT 超时才显示默认字体，会立即显示默认字体。FOUT 比 FOIT 好，但是需要注意它引起的 reflow。")])]),t._v(" "),a("p",[t._v("为了实现 FOUT，一般可设置 "),a("code",[t._v("font-display")]),t._v(" 为 "),a("code",[t._v("swap")]),t._v("、"),a("code",[t._v("fallback")]),t._v(" 或 "),a("code",[t._v("optional")]),t._v("。")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("swap")]),t._v("：为字体提供一个非常小的阻塞周期和无限的交换周期。（自定义字体加载成功即显示字体样式，可以在页面中看到的一个字体替换的效果）")]),t._v(" "),a("li",[a("code",[t._v("fallback")]),t._v("：为字体提供一个非常小的阻塞周期和短暂的交换周期。（Gives the font face an extremely small block period (100ms or less is recommended in most cases) and a short swap period (3s is recommended in most cases).）")]),t._v(" "),a("li",[a("code",[t._v("optional")]),t._v("：为字体提供一个非常小的阻塞周期，并且没有交换周期。（Gives the font face an extremely small block period (100ms or less is recommended in most cases) and a 0s swap period）")])]),t._v(" "),a("div",{staticClass:"language-css line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token atrule"}},[a("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@font-face")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-family")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fcustom'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-display")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'swap'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-display")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fallback'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-display")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'optional'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("h2",{attrs:{id:"使用监听字体加载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用监听字体加载"}},[t._v("#")]),t._v(" 使用监听字体加载")]),t._v(" "),a("h3",{attrs:{id:"fontfaceobserver"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fontfaceobserver"}},[t._v("#")]),t._v(" FontFaceObserver")]),t._v(" "),a("p",[t._v("通过使用插件 "),a("code",[t._v("npm i fontfaceobserver")]),t._v(" 来监听字体加载完成，从而按需设置字体样式。")]),t._v(" "),a("p",[t._v("在字体加载前预算一种字体或使用 loading 效果什么的，字体加载成功后切换字体即可")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// css 中 @font-face 已定义好")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" FontFaceObserver "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fontfaceobserver'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadfont")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" ffo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FontFaceObserver")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'My Family'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  ffo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("load")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fcustom'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fontFamily "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'My Family'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("h3",{attrs:{id:"font-load-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#font-load-api"}},[t._v("#")]),t._v(" Font Load API")]),t._v(" "),a("p",[t._v("方法效果同 FontFaceObserver。")]),t._v(" "),a("p",[t._v("使用 Font Load API 加载字体，字体在加载完成前预算一种字体，字体加载完成切换相应的 CSS 即可。")]),t._v(" "),a("p",[t._v("但是需注意 Font Load API 是原生的 API，有兼容性问题。")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}},[a("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n  document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fonts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("load")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1em open_sansregular'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" docEl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("documentElement"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    docEl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("className "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("' open-sans-loaded'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token style"}},[a("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n  "),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".open-sans-loaded h1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-family")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" open_sansregular"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("h2",{attrs:{id:"字体转-base64uri"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字体转-base64uri"}},[t._v("#")]),t._v(" 字体转 BASE64URI")]),t._v(" "),a("p",[t._v("核心要义就是将@font-face 中定义字体时的路径直接改为字体的 base64 编码。")]),t._v(" "),a("ul",[a("li",[t._v("优点：因为不会产生 FOIT 和 FOUT。所以不会有 reflow 和 repaint。")]),t._v(" "),a("li",[t._v("缺点：\n"),a("ul",[a("li",[t._v("字体转成 base64 也会很大，会影响页面首次加载速度。")]),t._v(" "),a("li",[t._v("不支持逗号分隔的形式加载多种格式的字体，只能加载一种格式字体。这导致你为了尽可能保证所有浏览器都可以兼容，通常会指定为 woff 格式，因为 woff 格式兼容性好，但是却没法使用更小体积的 woff2 格式，因为 woff2 格式兼容性差点。")])])])]),t._v(" "),a("h2",{attrs:{id:"异步加载-base64-格式-uri-字体"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#异步加载-base64-格式-uri-字体"}},[t._v("#")]),t._v(" 异步加载 BASE64 格式 URI 字体")]),t._v(" "),a("p",[t._v("通过异步的方式插入带有 BASE64 格式 URI 字体的 CSS 链接。")]),t._v(" "),a("blockquote",[a("p",[t._v("至此笔者已经词穷了，下面是 CV 大佬们的博文来的，文末已贴出出处。")])]),t._v(" "),a("h2",{attrs:{id:"foft-flash-of-faux-text"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#foft-flash-of-faux-text"}},[t._v("#")]),t._v(" FOFT(Flash of Faux Text)")]),t._v(" "),a("p",[t._v("FOFT 会把字体的加载分成多个部分，首先加载罗马网络字体，然后会在加载真实的粗体和斜体的时候立即使用 font-synthesis 属性渲染粗体和斜体的变体。")]),t._v(" "),a("p",[t._v("这种方法是基于[使用 Font Load API + FOUT + class 切换]这种方式的，非常适合加载同一种字体但是不同粗细，字形的场景，比如罗马、粗体、斜体、粗斜体等。")]),t._v(" "),a("p",[t._v("我们将这些字体分成 2 阶段：")]),t._v(" "),a("ul",[a("li",[t._v("第一阶段是罗马字体")]),t._v(" "),a("li",[t._v("然后立即渲染人造粗体和斜体")]),t._v(" "),a("li",[t._v("最后(第二阶段)用真实字体替代")])]),t._v(" "),a("p",[t._v("这里面还可以使用 sessionStorage 优化访问重复视图的场景。")]),t._v(" "),a("h2",{attrs:{id:"critical-foft"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#critical-foft"}},[t._v("#")]),t._v(" CRITICAL FOFT")]),t._v(" "),a("p",[t._v("CRITICAL FOFT 和标准的 FOFI 的唯一区别就在于第一阶段罗马字体的加载，CRITICAL FOFT 不会加载罗马字体的全集，只会加载它的一个子集（比如 A-Za-z0-9），全集会在第二阶段加载。")]),t._v(" "),a("h2",{attrs:{id:"critical-foft-with-data-uri"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#critical-foft-with-data-uri"}},[t._v("#")]),t._v(" CRITICAL FOFT WITH DATA URI")]),t._v(" "),a("p",[t._v("和 CRITICAL FOFT 的唯一区别就是罗马子集字体的加载方式，前面是用 Font Load API 完成了，这里会将马子集字体硬编码成 BASE64 URI 的形式加载。")]),t._v(" "),a("h2",{attrs:{id:"critical-foft-with-preload"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#critical-foft-with-preload"}},[t._v("#")]),t._v(" CRITICAL FOFT WITH PRELOAD")]),t._v(" "),a("p",[t._v("同上面的唯一区别还是第一阶段罗马子集字体的加载方式，它采用的是 preload 的形式加载。")]),t._v(" "),a("h1",{attrs:{id:"相关文献"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相关文献"}},[t._v("#")]),t._v(" 相关文献")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.fontsquirrel.com/tools/webfont-generator",target:"_blank",rel:"noopener noreferrer"}},[t._v("字体转码工具-Webfont Generator"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://cloudconvert.com/eot-to-ttf",target:"_blank",rel:"noopener noreferrer"}},[t._v("字体转码工具- cloudconvert Generator"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/aui/font-spider",target:"_blank",rel:"noopener noreferrer"}},[t._v("font-spider 官网"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/ecomfe/fontmin",target:"_blank",rel:"noopener noreferrer"}},[t._v("fontmin 官网"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.npmjs.com/package/fontfaceobserver",target:"_blank",rel:"noopener noreferrer"}},[t._v("fontfaceobserver 插件"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/CSS/@font-face/font-display",target:"_blank",rel:"noopener noreferrer"}},[t._v("MDN - font-display"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://juejin.cn/post/6844903790580072462",target:"_blank",rel:"noopener noreferrer"}},[t._v("CSS @font-face 性能优化"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://dev.opera.com/articles/better-font-face/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Better @font-face with Font Load Events"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.zachleat.com/web/comprehensive-webfonts/#font-display",target:"_blank",rel:"noopener noreferrer"}},[t._v("A COMPREHENSIVE GUIDE TO FONT LOADING STRATEGIES"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://mp.weixin.qq.com/s/a2-PlleQUOZzEu7Y0iaRhg",target:"_blank",rel:"noopener noreferrer"}},[t._v("web 端字体兼容性适配"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://mp.weixin.qq.com/s/o9v4LcoRy53waMMnZA7D4A",target:"_blank",rel:"noopener noreferrer"}},[t._v("原文-CSS3 使用@font-face 引入字体的兼容性方案及优化"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);