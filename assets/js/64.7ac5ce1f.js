(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{677:function(_,v,o){"use strict";o.r(v);var e=o(9),c=Object(e.a)({},(function(){var _=this,v=_.$createElement,o=_._self._c||v;return o("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[o("blockquote",[o("p",[_._v("持续更新...")])]),_._v(" "),o("h1",{attrs:{id:"前言"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[_._v("#")]),_._v(" 前言")]),_._v(" "),o("h2",{attrs:{id:"名词解析"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#名词解析"}},[_._v("#")]),_._v(" 名词解析")]),_._v(" "),o("div",{staticClass:"language- line-numbers-mode"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[_._v("- 域名：`www.google.com`\n- 客户端配置的本地名称服务器：`dns.google.com`\n- 域名根目录名称服务器`a.rootserver.net`\n\n- 主要角色\n\n  - DNS 客户 -> `DNS 客户`\n  - 本地名称服务器 -> `Local DNS`\n  - 根名称服务器 ->`.`\n  - 一级（顶级）名称服务器 -> `com`\n  - 二级名称服务器 -> `google.com`\n  - 权威名称服务器 -> `www.google.com`\n")])]),_._v(" "),o("div",{staticClass:"line-numbers-wrapper"},[o("span",{staticClass:"line-number"},[_._v("1")]),o("br"),o("span",{staticClass:"line-number"},[_._v("2")]),o("br"),o("span",{staticClass:"line-number"},[_._v("3")]),o("br"),o("span",{staticClass:"line-number"},[_._v("4")]),o("br"),o("span",{staticClass:"line-number"},[_._v("5")]),o("br"),o("span",{staticClass:"line-number"},[_._v("6")]),o("br"),o("span",{staticClass:"line-number"},[_._v("7")]),o("br"),o("span",{staticClass:"line-number"},[_._v("8")]),o("br"),o("span",{staticClass:"line-number"},[_._v("9")]),o("br"),o("span",{staticClass:"line-number"},[_._v("10")]),o("br"),o("span",{staticClass:"line-number"},[_._v("11")]),o("br"),o("span",{staticClass:"line-number"},[_._v("12")]),o("br")])]),o("h2",{attrs:{id:"基础知识"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#基础知识"}},[_._v("#")]),_._v(" 基础知识")]),_._v(" "),o("p",[_._v("DNS，Domain Name System/域名系统，一个面向互联网的将域名和 IP 地址相互映射的一个分布式数据库。是一个树状结构的记录、映射域名和 IP 地址的分布式系统。DNS 查询使用 UDP 协议。")]),_._v(" "),o("p",[_._v("为啥需要 DNS 呢，因为终端间的数据交互是通过 IP 地址来定位目标的，IP 地址如 192.168.8.8。由于人类对无规律的 IP 地址不容易记忆，因此一般使用 域名地址 来代替 IP 地址 进行搜索使用，但实际上终端间的访问最终还是通过 域名地址映射获取 IP 地址来访问的。")]),_._v(" "),o("p",[_._v("用户习惯使用域名地址来访问终端，当浏览器发出请求后，操作系统会使用 DNS 来查询域名地址对应的 IP 地址是什么，查询成功后操作系统会通过 IP 地址来访问终端来获取资源。")]),_._v(" "),o("p",[_._v("域名 DNS 名称服务器查询都是从根部"),o("code",[_._v(".")]),_._v("按照从右往左顺序原则进行的。")]),_._v(" "),o("p",[_._v("通常情况下，主机向本地名称服务器的查询一般都是采用"),o("strong",[_._v("递归查询")]),_._v("，而本地名称服务器向 DNS(一级、二级、三级...)名称服务器采用"),o("strong",[_._v("迭代查询")]),_._v("。")]),_._v(" "),o("p",[_._v("主机的 DNS 查询主要有两种方式，递归查询 和 迭代查询，其主要区别为：")]),_._v(" "),o("ul",[o("li",[o("p",[_._v("发送 DNS 查询时，DNS "),o("code",[_._v("请求报头部")]),_._v("的 "),o("code",[_._v("RD 字段")]),o("strong",[_._v("默认")]),_._v("为 "),o("code",[_._v("1")]),_._v("，默认为 "),o("code",[_._v("递归查询")]),_._v("。")]),_._v(" "),o("ul",[o("li",[_._v("RD 为 "),o("code",[_._v("1")]),_._v(" => "),o("code",[_._v("递归查询")]),_._v("，"),o("strong",[_._v("默认查询方式")])]),_._v(" "),o("li",[_._v("RD 为 "),o("code",[_._v("0")]),_._v(" => "),o("code",[_._v("迭代查询")])])])]),_._v(" "),o("li",[o("p",[o("code",[_._v("递归查询")]),_._v(" 以"),o("code",[_._v("本地名称服务器")]),o("strong",[_._v("为中心")]),_._v("，DNS 客户端只是发出原始的域名查询请求报文，然后就一直处于等待状态，直到本地名称服务器发来了最终的查询结果。此时的本地名称服务器就相当于"),o("code",[_._v("中介代理")]),_._v("的作用。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("递归查询")]),_._v(" 的触发条件：1. 默认触发；2. RD 设置为 1 触发；")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("迭代查询")]),_._v(" 以"),o("code",[_._v("DNS客户端自己")]),o("strong",[_._v("为中心")]),_._v("。所有查询工作全部是 DNS 客户端自己进行。"),o("code",[_._v("DNS客户")]),_._v(" 会按照顺序 向 本地名称服务器 、一级名称服务器、二级名称服务器、权威名称服务器发出查询 DNS 的 请求查询报文，这个过程中每一级服务器就会返回一个能解答这个查询的下一个名称服务器列表 A，获取到下个查询列表信息 A 后 DNS 客户 会再向返回的列表 A 中发出请求，直到找到最终负责所查域名的名称服务器，从它得到最终结果。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("迭代查询")]),_._v(" 的触发条件：1. 在所配置的本地名称服务器上查询触发（因为本地名称服务器禁止使用递归查询）；2. RD 设置为 0 触发；")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("递归查询")]),_._v("和"),o("code",[_._v("迭代查询")]),_._v(" 查询一级域名服务器到权威域名服务器的步骤相似，主要区别是"),o("code",[_._v("递归查询")]),_._v(" 以"),o("code",[_._v("本地名称服务器")]),o("strong",[_._v("为中心")]),_._v("进行查询， "),o("code",[_._v("迭代查询")]),_._v(" 以"),o("code",[_._v("DNS客户端自己")]),o("strong",[_._v("为中心")]),_._v("查询。")])])]),_._v(" "),o("h3",{attrs:{id:"dns-迭代查询"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#dns-迭代查询"}},[_._v("#")]),_._v(" DNS 迭代查询")]),_._v(" "),o("p",[_._v("迭代查询，也叫迭代解析。使用迭代解析方式时，所有的查询工作都是由 DNS 客户自己进行的。如果它所配置的主名称服务器（如 Windows 系统中的"),o("code",[_._v("首选 DNS 服务器")]),_._v("）不能解析的话，客户端还会继续向所配置的其它名称服务器（如 Windows 系统中的"),o("code",[_._v("备用 DNS 服务器")]),_._v("）查询。")]),_._v(" "),o("p",[_._v("如果考虑了本地名称服务器的缓存技术（在 DNS 服务器上对一定数量查询过的记录保存一定时间，这样后面查询同样的域名信息时就可直接从缓存中调出来，以加速查询效率）的话，迭代名称解析的基本流程如下（在此仅以首先 DNS 服务器作为本地名称服务器为例，与其它备用 DNS 服务器的解析流程完全一样）：")]),_._v(" "),o("ol",[o("li",[o("p",[o("code",[_._v("DNS 客户端")]),_._v("向本机配置的"),o("code",[_._v("本地名称服务器")]),_._v("发出 DNS 域名查询请求。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("本地名称服务器")]),_._v("收到请求后，"),o("code",[_._v("先查询本地的缓存")]),_._v("，如果有该域名的记录项，则本地名称服务器就直接把查询的结果返回给客户端；如果本地缓存中没有该域名的记录，则向 DNS 客户端返回一条 DNS 应答报文，报文中会给出一些参考信息，如本地名称服务器上的根名称服务器地址等。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("DNS 客户端")]),_._v("在收到本地名称服务器的应答报文后，会根据其中的根名称服务器地址信息，向对应的根名称服务器再次发出与前面一样的 DNS 查询请求报文。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("根名称服务器")]),_._v("在收到 DNS 查询请求报文后，通过查询自己的 DNS 数据库得到请求 DNS 域名中顶级域名所对应的顶级名称服务器信息，然后以一条 DNS 应答报文返回给 DNS 客户端。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("DNS 客户端")]),_._v("根据来自根名称服务器应答报文中的对应顶级名称服务器地址信息，向该顶级名称服务器发出与前面一样的 DNS 查询请求报文。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("顶级名称服务器")]),_._v("在收到 DNS 查询请求后，"),o("code",[_._v("先查询自己的缓存")]),_._v("，如果有所请求的 DNS 域名的记录项，则直接把对应的记录项返回给 DNS 客户端，否则通过查询后把对应域名中二级域名所对应的二级名称服务器地址信息以一条 DNS 应答报文返回给 DNS 客户端。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("DNS 客户端")]),_._v("继续按照步骤 5 与步骤 6 的方法分别向三级、四级名称服务器查询，直到查到最终的权威名称服务器返回到最终的记录。")])])]),_._v(" "),o("p",[_._v("如果在上述步骤中对应域名的权威名称服务器都说找不到对应的域名记录，则会向 DNS 客户端返回一条查询失败的 DNS 应答报文。当然，如果这个权威名称服务器上配置了指向其它名称服务器的转发器，则权威名称服务器还会在转发器指向的名称服务器上进一步重复上述步骤查询。另外，如果 DNS 客户端上配置了多个 DNS 服务器，则还会继续向其它 DNS 服务器查询的。")]),_._v(" "),o("p",[_._v("DNS 查找到这里就基本来可以获取域名对应的 IP 了，除非需要查找的域名没有配置 IP 则查询失败。")]),_._v(" "),o("h3",{attrs:{id:"dns-迭代查询-示例"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#dns-迭代查询-示例"}},[_._v("#")]),_._v(" DNS 迭代查询-示例")]),_._v(" "),o("p",[_._v("为了方便理解，例举一个具体的示例，看一下 DNS 迭代解析的工作流程：")]),_._v(" "),o("ul",[o("li",[_._v("假设客户端想要访问自己并不识别的站点"),o("code",[_._v("www.google.com")]),_._v("，那么 DNS 客服端的查询路径如下：")])]),_._v(" "),o("ol",[o("li",[o("p",[o("code",[_._v("DNS 客户端")]),_._v("向所配置的本地名称服务器 "),o("code",[_._v("dns.google.com")]),_._v(" 发出解析 "),o("code",[_._v("www.google.com")]),_._v(" 域名的 DNS 请求报文。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("本地名称服务器")]),_._v("收到 客户端的 DNS 查询请求报文后，"),o("code",[_._v("先查询本地缓存")]),_._v("。假设没有查到该域名对应记录，则本地名称服务器把所配置的根名称服务器 "),o("code",[_._v("a.rootserver.net")]),_._v(" 地址信息以 DNS 应答报文返回给 DNS 客户端。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("DNS 客户端")]),_._v("在收到本地名称服务器的 DNS 应答报文后，根据其中给出的根名称服务器地址信息，向对应的根名称服务器再次发送解析 "),o("code",[_._v("www.google.com")]),_._v(" 域名的 DNS 请求报文）。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("根名称服务器")]),_._v("在收到 DNS 查询请求后，通过查询得到 "),o("code",[_._v(".com")]),_._v(" 顶级域名所对应的顶级名称服务器，然后把查询到的对应顶级域名信息以一条 DNS 应答报文返回给 DNS 客户端。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("DNS 客户端")]),_._v("在收到根名称服务器的 DNS 应答报文，得到 "),o("code",[_._v(".com")]),_._v(" 顶级域名所对应的顶级名称服务器地址后，再次向对应的顶级名称服务器发送一条解析 "),o("code",[_._v("www.google.com")]),_._v(" 域名的的 DNS 请求报文。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v(".com")]),_._v(" 顶级名称服务器在收到 DNS 客户端的 DNS 查询请求报文后，"),o("code",[_._v("先查询自己的缓存")]),_._v("，假设也没有该域名的记录项，则查询 "),o("code",[_._v("google.com")]),_._v(" 所对应的二级名称服务器，然后把查询到的对应二级域名信息以一条 DNS 应答报文返回给 DNS 客户端。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("DNS 客户端")]),_._v("在收到 "),o("code",[_._v(".com")]),_._v(" 顶级名称服务器的 DNS 应答报文，得到 "),o("code",[_._v("google.com")]),_._v(" 二级域名所对应的二级名称服务器地址后，再次向对应的二级名称服务器发送一条解析 "),o("code",[_._v("www.google.com")]),_._v(" 域名的 DNS 请求报文。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("google.com")]),_._v(" 二级名称服务器在收到 DNS 客户端的 DNS 查询请求报文后，"),o("code",[_._v("也先查询自己的缓存")]),_._v("，假设也没有该域名的记录项，则查询 "),o("code",[_._v("www.google.com")]),_._v(" 所对应的权威名称服务器（因为这个名称服务器已包括了整个域名 "),o("code",[_._v("www.google.com")]),_._v(" 所在区域），然后把查询到的对应权威域名信息以一条 DNS 应答报文返回给 DNS 客户端。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("DNS 客户端")]),_._v("在收到 "),o("code",[_._v("google.com")]),_._v(" 二级名称服务器的 DNS 应答报文，得到 "),o("code",[_._v("www.google.com")]),_._v(" 三级域名所对应的权威名称服务器地址后，再次向对应的"),o("code",[_._v("权威名称服务器")]),_._v("发送解析 "),o("code",[_._v("www.google.com")]),_._v(" 域名的 DNS 请求报文。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("权威名称服务器``www.google.com")]),_._v("在收到 DNS 客户端的 DNS 查询请求报文后，在它的 DNS 区域数据库中查找，最终得出了 "),o("code",[_._v("www.google.com")]),_._v(" 域名所对应的 "),o("code",[_._v("IP 地址")]),_._v("。然后向 DNS 客户端返回一条 DNS 应答报文。这样 DNS 客户端获取 IP 地址后就可以正常访问这个网站了。")])])]),_._v(" "),o("h3",{attrs:{id:"dns-递归查询"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#dns-递归查询"}},[_._v("#")]),_._v(" DNS 递归查询")]),_._v(" "),o("p",[o("code",[_._v("递归查询(递归解析)")]),_._v(" 是"),o("strong",[_._v("默认")]),_._v("的 DNS 解析方式。在这种解析方式中，如果客户端配置的本地名称服务器遇到不能解析的，则后面的查询全由"),o("code",[_._v("本地名称服务器")]),o("strong",[_._v("代替")]),o("code",[_._v("DNS 客户端")]),_._v("进行"),o("strong",[_._v("查询")]),_._v("，直到本地名称服务器从权威名称服务器得到了正确的解析结果，然后由本地名称服务器告诉 DNS 客户端查询的结果。")]),_._v(" "),o("p",[_._v("在递归查询过程中，一直是以本地名称服务器为中心的，"),o("code",[_._v("DNS 客户端")]),_._v("只是发出原始的域名查询请求报文，然后就"),o("code",[_._v("一直处于等待状态")]),_._v("的，"),o("strong",[_._v("直到")]),o("code",[_._v("本地名称服务器")]),o("strong",[_._v("返回")]),_._v("最终的查询结果。此时的本地名称服务器就相当于中介代理的作用。")]),_._v(" "),o("p",[_._v("如果考虑了本地名称服务器的缓存技术（在 DNS 服务器上对一定数量查询过的记录保存一定时间，这样后面查询同样的域名信息时就可直接从缓存中调出来，以加速查询效率）的话，则递归解析的基本流程如下（在此仅以首先 DNS 服务器作为本地名称服务器为例，与其它备用 DNS 服务器的解析流程完全一样）：")]),_._v(" "),o("ol",[o("li",[o("p",[o("code",[_._v("客户端")]),_._v("向本机配置的"),o("code",[_._v("本地名称服务器")]),_._v("发出 DNS 域名查询请求。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("本地名称服务器")]),_._v("收到请求后，"),o("code",[_._v("先查询本地的缓存")]),_._v("，如果有该域名的记录项，则本地名称服务器就直接把查询的结果返回给客户端；如果本地缓存中没有该域名的记录，则本地名称服务器再以 DNS 客户端的角色发送与前面一样的 DNS 域名查询请求发给根名称服务器。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("根名称服务器")]),_._v("收到 DNS 请求后，把所查询得到的所请求的 DNS 域名中顶级域名所对应的顶级名称服务器地址返回给本地名称服务器。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("本地名称服务器")]),_._v("根据根名称服务器所返回的顶级名称服务器地址，向对应的顶级名称服务器发送与前面一样的 DNS 域名查询请求。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("顶级名称服务器")]),_._v("在收到 DNS 查询请求后，也是"),o("code",[_._v("先查询自己的缓存")]),_._v("，如果有所请求的 DNS 域名的记录项，则直接把对应的记录项返回给本地名称服务器，然后再由本地名称服务器返回给 DNS 客户端，否则向本地名称服务器返回所请求的 DNS 域名中的二级域名所对应的二级名称服务器地址。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("本地名称服务器")]),_._v("根据根名称服务器所返回的二级名称服务器地址，向对应的二级名称服务器发送与前面一样的 DNS 域名查询请求。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("二级名称服务器")]),_._v("在收到 DNS 查询请求后，也是"),o("code",[_._v("先查询自己的缓存")]),_._v("，如果有所请求的 DNS 域名的记录项，则直接把对应的记录项返回给本地名称服务器，然后再由本地名称服务器返回给 DNS 客户端，否则向本地名称服务器返回所请求的 DNS 域名中的三级域名所对应的三级名称服务器地址。")])]),_._v(" "),o("li",[o("p",[_._v("就这样"),o("code",[_._v("本地名称服务器")]),_._v("重复步骤 6 和步骤 7 的方法一次次地向三级、四级名称服务器等查询，"),o("code",[_._v("直到")]),_._v("最终的对应域名所在区域的"),o("code",[_._v("权威名称服务器")]),_._v("返回到最终的记录给本地名称服务器。")])]),_._v(" "),o("li",[o("p",[_._v("然后再由"),o("code",[_._v("本地名称服务器")]),_._v("返回给 "),o("code",[_._v("DNS 客户")]),_._v("，"),o("code",[_._v("同时")]),_._v("本地名称服务器会"),o("code",[_._v("缓存")]),_._v("本次查询得到的记录项。")])])]),_._v(" "),o("p",[_._v("如果在上述步骤中对应域名的权威名称服务器都说找不到对应的域名记录，则会向 DNS 客户端返回一条查询失败的 DNS 应答报文。当然，如果这个权威名称服务器上配置了指向其它名称服务器的转发器，则权威名称服务器还会在转发器指向的名称服务器上进一步重复上述步骤查询。另外，如果 DNS 客户端上配置了多个 DNS 服务器，则还会继续向其它 DNS 服务器查询的。")]),_._v(" "),o("p",[_._v("简单的讲，递归查询步骤；")]),_._v(" "),o("ol",[o("li",[o("code",[_._v("客户端")]),_._v("向本机配置的"),o("code",[_._v("本地名称服务器")]),_._v("发出 DNS 域名查询请求，发出请求后"),o("code",[_._v("客户端")]),_._v("一直处于等待状态，等待"),o("code",[_._v("本地名称服务器")]),_._v("返回查询结果。")]),_._v(" "),o("li",[o("code",[_._v("本地名称服务器")]),_._v("收到 DNS 请求后，"),o("code",[_._v("先查询本地的缓存")]),_._v("，查到存在该域名记录项立即返回结果，否则"),o("code",[_._v("本地名称服务器")]),_._v("不断向 DNS 名称服务器发送 DNS 请求查询，直到查到改域名对应的"),o("code",[_._v("权威名称服务器")]),_._v("并获得记录结果。")]),_._v(" "),o("li",[o("code",[_._v("本地名称服务器")]),_._v(" 解析到结果后将结果返回给 "),o("code",[_._v("客户端")]),_._v("。")])]),_._v(" "),o("h3",{attrs:{id:"dns-递归查询-示例"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#dns-递归查询-示例"}},[_._v("#")]),_._v(" DNS 递归查询-示例")]),_._v(" "),o("p",[_._v("为了方便理解，例举一个具体的示例，看一下 DNS 递归解析的工作流程：")]),_._v(" "),o("ul",[o("li",[_._v("假设客户端想要访问自己并不识别的站点"),o("code",[_._v("www.google.com")]),_._v("，那么 DNS 客服端的查询路径如下：")])]),_._v(" "),o("ol",[o("li",[o("p",[o("code",[_._v("DNS 客户端")]),_._v(" 向所配置的本地名称服务器 "),o("code",[_._v("dns.google.com")]),_._v(" 发出解析 "),o("code",[_._v("www.google.com")]),_._v(" 域名的 DNS 请求报文。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("本地名称服务器")]),_._v("收到请求后，"),o("code",[_._v("先查询本地缓存")]),_._v("。假设没有查到该域名对应记录，则本地名称服务器向所配置的根名称服务器 "),o("code",[_._v("a.rootserver.net")]),_._v(" 发出解析请求解析 "),o("code",[_._v("www.google.com")]),_._v(" 域名的 DNS 请求报文(相当于对本地名称服务器说:“请给我 "),o("code",[_._v("www.google.com")]),_._v(" 所对应的 IP 地址”)。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("根名称服务器")]),_._v("收到 客户端的 DNS 查询请求报文后，通过查询得到"),o("code",[_._v(".com")]),_._v(" 顶级域名所对应的顶级名称服务器，然后向本地名称服务器返回一条应答报文(相当说“我不知道"),o("code",[_._v("www.google.com")]),_._v(" 域名所对应的 IP 地址，但我现在告诉你 "),o("code",[_._v(".com")]),_._v(" 域名所对应的顶级名称服务器地址”)。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("本地名称服务器")]),_._v("在收到根名称服务器的 DNS 应答报文，得到 "),o("code",[_._v(".com")]),_._v(" 顶级域名所对应的顶级名称服务器地址后，再次向对应的顶级名称服务器发送一条请求解析 "),o("code",[_._v("www.google.com")]),_._v(" 域名的 DNS 请求报文。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v(".com")]),_._v("顶级名称服务器在收到 DNS 请求报文后，"),o("code",[_._v("先查询自己的缓存")]),_._v("，假设也没有该域名的记录项，则查询 "),o("code",[_._v("google.com")]),_._v(" 所对应的二级名称服务器，然后也向本地名称服务返回一条 DNS 应答报文(相当于对本地名称服务器说:“我不知道 "),o("code",[_._v("www.google.com")]),_._v(" 域名所对应的 IP 地址，但我现在告诉你 "),o("code",[_._v("google.com")]),_._v(" 域名所对应的二级名称服务器地址”。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("本地名称服务器")]),_._v("在收到 "),o("code",[_._v(".com")]),_._v(" 顶级名称服务器的 DNS 应答报文，得到"),o("code",[_._v("google.com")]),_._v(" 二级域名所对应的二级名称服务器地址后，再次向对应的二级名称服务器发送一条请求解析 "),o("code",[_._v("www.google.com")]),_._v(" 域名的 DNS 请求报文。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("google.com")]),_._v(" 二级名称服务器在收到 DNS 请求报文后，也"),o("code",[_._v("先查询自己的缓存")]),_._v("，假设也没有该域名的记录项，则查询 "),o("code",[_._v("www.google.com")]),_._v(" 所对应的权威名称服务器，然后也向本地名称服务器返回一条 DNS 应答报文(相当于本地名称服务器说：“我不知道 "),o("code",[_._v("www.google.com")]),_._v(" 域名所对应的 IP 地址，但我现在告诉你 "),o("code",[_._v("www.google.com")]),_._v(" 域名所对应的权威名称服务器地址”)。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("本地名称服务器")]),_._v("在收到 "),o("code",[_._v("google.com")]),_._v(" 二级名称服务器的 DNS 应答报文，得到 "),o("code",[_._v("www.google.com")]),_._v(" 三级域名所对应的权威名称服务器地址后，再次向对应的权威名称服务器发送一条请求解析 "),o("code",[_._v("www.google.com")]),_._v(" 域名的 DNS 请求报文。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("www.google.com``权威名称服务器")]),_._v("在收到 DNS 请求后，在它的 DNS 区域数据库中查找，最终得出了"),o("code",[_._v("www.google.com")]),_._v(" 域名所对应的 IP 地址。然后向本地名称服务器返回到条 DNS 应答报文(相当于对本地名称服务器说：“"),o("code",[_._v("www.google.com")]),_._v(" 域名的 IP 地址为 xxx.xxx.xxx.xxx”)。")])]),_._v(" "),o("li",[o("p",[o("code",[_._v("本地名称服务器")]),_._v("在"),o("strong",[_._v("收到")]),o("code",[_._v("权威名称服务器")]),_._v("的应答报文后，"),o("strong",[_._v("向")]),_._v(" "),o("code",[_._v("DNS 客户端")]),o("strong",[_._v("返回")]),_._v("一条 DNS "),o("code",[_._v("应答报文")]),_._v("，"),o("strong",[_._v("告诉")]),_._v(" DNS 客户端所得到的"),o("code",[_._v("www.google.com")]),_._v(" 域名的 "),o("code",[_._v("IP 地址")]),_._v("。这样 DNS 客户端就可以正常访问这个网站了。")])])]),_._v(" "),o("p",[_._v("PS：DNS 是基于 UDP 做的查询，大家也可以考虑下为什么之前不考虑使用 TCP 去实现。")]),_._v(" "),o("h1",{attrs:{id:"相关文献"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#相关文献"}},[_._v("#")]),_._v(" 相关文献")]),_._v(" "),o("ul",[o("li",[o("a",{attrs:{href:"https://mp.weixin.qq.com/s?__biz=Mzg4NzI3MTg4Mw==&mid=2247483995&idx=1&sn=d385e62a805cf704b47b1935982a46ad&chksm=cf8dbafff8fa33e9577bccea60bb38e48f9ddb4e271372d1f9154729a24c496c90afe0292b76&token=1933599772&lang=zh_CN#rd",target:"_blank",rel:"noopener noreferrer"}},[_._v("DNS 的递归查询与迭代查询-原文"),o("OutboundLink")],1)]),_._v(" "),o("li",[o("a",{attrs:{href:"https://blog.csdn.net/lycb_gz/article/details/11720247",target:"_blank",rel:"noopener noreferrer"}},[_._v("例解 DNS 递归/迭代名称解析原理-csdn"),o("OutboundLink")],1)]),_._v(" "),o("li",[o("a",{attrs:{href:"http://dnscheck.pingdom.com/",target:"_blank",rel:"noopener noreferrer"}},[_._v("dnscheck-工具"),o("OutboundLink")],1)]),_._v(" "),o("li",[_._v("《深入理解计算机网络》")])])])}),[],!1,null,null,null);v.default=c.exports}}]);